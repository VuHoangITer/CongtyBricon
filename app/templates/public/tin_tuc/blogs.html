{% extends 'layouts/base.html' %} {% block title %}Tin tức - {{
get_setting('website_name', 'BRICON VIỆT NAM') }}{% endblock %} {% block
meta_description %}Cập nhật tin tức, kiến thức và xu hướng mới nhất về keo dán
gạch, chà ron và chống thấm từ {{ get_setting('website_name', 'BRICON VIỆT NAM')
}}.{% endblock %} {% block content %}
<!-- ==================== BREADCRUMB ==================== -->
<div class="page-header bg-light py-4">
  <div class="container">
    <h1 class="fw-bold">Tin tức</h1>
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb mb-0">
        <li class="breadcrumb-item">
          <a href="{{ url_for('main.index') }}">Trang chủ</a>
        </li>
        <li class="breadcrumb-item active" aria-current="page">Tin tức</li>
      </ol>
    </nav>
  </div>
</div>

<!-- ==================== BLOG LIST ==================== -->
<section class="py-5">
  <div class="container">
    <div class="row">
      <!-- Sidebar -->
      <div class="col-lg-4">
        <!-- Search Box -->
        <div class="card shadow-sm border-0 mb-4">
          <div class="card-body">
            <h5 class="fw-bold mb-3">
              <i class="bi bi-search text-warning me-2"></i>Tìm kiếm
            </h5>
            <form action="{{ url_for('main.blog') }}" method="get">
              <div class="input-group">
                <input
                  type="text"
                  class="form-control"
                  name="search"
                  placeholder="Tìm bài viết..."
                  aria-label="Tìm kiếm bài viết"
                />
                <button class="btn btn-warning" type="submit">
                  <i class="bi bi-search"></i>
                </button>
              </div>
            </form>
          </div>
        </div>

        <!-- Featured Blogs -->
        {% if featured_blogs %}
        <div class="card shadow-sm border-0">
          <div class="card-body">
            <h5 class="fw-bold mb-3">
              <i class="bi bi-star text-warning me-2"></i>Bài viết nổi bật
            </h5>
            <ul class="list-unstyled">
              {% for fb in featured_blogs %}
              <li
                class="mb-3 pb-3 {% if not loop.last %}border-bottom{% endif %}"
              >
                <a
                  href="{{ url_for('main.blog_detail', slug=fb.slug) }}"
                  class="text-decoration-none"
                >
                  <strong class="text-dark d-block mb-1">{{ fb.title }}</strong>
                </a>
                <p class="text-muted small mb-0">
                  <i class="bi bi-calendar"></i> {{
                  fb.created_at|vn_date }}
                  <span class="ms-2">
                    <i class="bi bi-eye"></i> {{ fb.views }}
                  </span>
                </p>
              </li>
              {% endfor %}
            </ul>
          </div>
        </div>
        {% endif %}
      </div>
      <!-- Blog Grid -->
      <div class="col-lg-8">
        {% if blogs %}
        <div class="row g-4">
          {% for blog in blogs %}
            {% include 'components/card_blog.html' with context %}
          {% endfor %}
        </div>

        <!-- Pagination -->
        {% set endpoint = 'main.blog' %}
        {% set category_slug = None %}
        {% set search = request.args.get('search', '') %}
        {% set sort = None %}
        {% include 'components/pagination.html' with context %}
        {% else %}
        <!-- Empty State -->
        <div class="text-center py-5">
          <i class="bi bi-inbox display-1 text-muted"></i>
          <p class="text-muted mt-3">Chưa có bài viết nào</p>
        </div>
        {% endif %}
      </div>
    </div>
  </div>
</section>

<!-- ==================== SCHEMA.ORG - ITEM LIST ==================== -->
{% if blogs %}
<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "ItemList",
    "name": "Tin tức {{ get_setting('website_name', 'BRICON VIỆT NAM')|e }}",
    "url": "{{ url_for('main.blog', _external=True) }}",
    "itemListElement": [
      {% for blog in blogs %}
      {
        "@type": "ListItem",
        "position": {{ loop.index }},
        "item": {
          "@type": "BlogPosting",
          "headline": "{{ blog.title|e }}",
          "image": "{{ blog.image|e }}",
          "datePublished": "{{ blog.created_at|vn_datetime('%Y-%m-%d') }}",
          "dateModified": "{{ blog.updated_at|vn_datetime('%Y-%m-%d') if blog.updated_at else blog.created_at|vn_datetime('%Y-%m-%d') }}",
          "author": {
            "@type": "Person",
            "name": "{{ blog.author if blog.author else get_setting('website_name', 'BRICON VIỆT NAM')|e }}"
          },
          "publisher": {
            "@type": "Organization",
            "name": "{{ get_setting('website_name', 'BRICON VIỆT NAM')|e }}",
            "logo": {
              "@type": "ImageObject",
              "url": "{{ get_setting('logo_url', url_for('static', filename='img/logo.png', _external=True))|e }}"
            }
          },
          "url": "{{ url_for('main.blog_detail', slug=blog.slug, _external=True) }}"
        }
      }{% if not loop.last %},{% endif %}
      {% endfor %}
    ]
  }
</script>
{% endif %}

<!-- ==================== SCHEMA.ORG - BREADCRUMB ==================== -->
<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "Trang chủ",
        "item": "{{ url_for('main.index', _external=True) }}"
      },
      {
        "@type": "ListItem",
        "position": 2,
        "name": "Tin tức",
        "item": "{{ url_for('main.blog', _external=True) }}"
      }
    ]
  }
</script>

<!-- Custom Styles -->
<style>
  .blog-card {
    transition: transform 0.3s, box-shadow 0.3s;
  }

  .blog-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15) !important;
  }

  .blog-card img {
    transition: transform 0.3s;
  }

  .blog-card:hover img {
    transform: scale(1.05);
  }
</style>
{% endblock %}
